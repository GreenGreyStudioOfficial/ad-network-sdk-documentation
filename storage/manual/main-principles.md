# Принцип работы SDK
В данном разделе мы поговорим об общих принципах и алгоритмах работы с SDK.

## О типах рекламы

На данный момент SDK поддерживает рекламу 2х типов - реклама, отображаемая внутри вебвью и видеореклама, воспроизводимая в контексте Unity. 
Решение о показе какого-либо типа рекламы принимается в зависимости от решений сервера. Внутри эдитора показывается только реклама второго типа.
Реклама внутри вебвью останавливает основной поток приложения, пока не закроется.
Видеореклама этого не делает.
В будущих релизах планируется отказаться от видеорекламы.

## Общая информация

В основе всего лежит статический класс [AdNetworkSDK](../api/methods/AdNetworkSDK.md), который будет делать всю основную работу: инициировать библиотеку, загружать рекламные объявления и показывать их.

Для того, чтобы совершать эту работу, в классе имеются открытые статические методы, которые, как правило, выполняются в фоновом режиме. Чтобы реагировать на их выполнение, существуют [интерфейсы слушателей](../api/listeners/listeners.md). Пользователю SDK предстоит самостоятельно реализовать эти интерфейсы, в зависимости от своих нужд.

Примеры реализации можно будет наблюдать в следующих разделах руководства, а так же в примерах, поставляемых внутри unitypackage вместе с SDK.

Если в вашем проекте уже интегрированы какие-либо рекламные sdk, то вы легко можете связать их с нашей библиотекой при помощи [коннекторов](../api/connectors/connectors.md). Пример реализации коннектора можно будет наблюдать в примерах, поставляемых внутри unitypackage вместе с SDK.

## Алгоритм работы

В зависимости от нужд пользователя, реализации работы с SDK будут отличаться друг от друга, однако все они будут работать по следующему алгоритму:

-   Инициализация библиотеки - на данном этапе происходит подготовка SDK к загрузке и показу рекламных объявлений, а так же инициализация коннекторов реализованных пользователем, для взаимодействия со сторонними рекламными SDK через нашу библиотеку.
    
-   Загрузка креатива - на данном этапе библиотека просит сервис подобрать и скачать подходящую рекламу для данного пользователя. Если наш рекламный сервис не смог найти рекламу, то он пытается выполнить загрузку через коннекторы пользователя, если они имеются. После того, как успешный ответ получен, креатив загружается в кэш.
    
-   Показ закэшированных креативов - на данном этапе SDK показывает пользователю креатив из кэша. Если загрузка креатива произошла при помощи коннектора, то и показ будет вызван через данный коннектор.
    

## Нюансы работы системы кэширования

Кэширование креативов и их очистка происходит автоматически без возможности пользователя SDK влиять на данный процесс.

Например, очистка кэша происходит по завершению показа ролика, или по истечению срока его актуальности. Срок актуальности объявления регулирует рекламодатель. Отсюда возможна ситуация, когда загруженный в кэш ролик при попытке показа выдает [ошибку](../api/listeners/IAdShowListener/OnShowError.md).

Еще один нюанс - это если в [AdNetworkInitParams](../api/models/AdNetworkInitParams.md) был передан список [типов рекламного объявления](../api/enums/AdType.md) для автозагрузки, то [AdNetworkSDK](../api/methods/AdNetworkSDK.md) будет поддерживать максимально возможное количество креативов в кеше приложения ([AdNetworkSDK](../api/methods/AdNetworkSDK.md) не реализует данный механизм в [коннекторах](../api/connectors/connectors.md)).

Обратите внимание, что при повторном вызове [Load](../api/methods/Load.md) с одим и тем же [типом рекламного объявления](../api/enums/AdType.md) не происходит загрузка нового креатива. Если данный тип уже закеширован, то вызовется [callback слушателя](../api/listeners/IAdLoadListener/IAdLoadListener.md).

Далее мы покажем как работать с библиотекой на примере.

---

[<< назад](integration.md) [далее >>](example.md)